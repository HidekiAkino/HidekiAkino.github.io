<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>商品購入フォーム</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<header>
    <center>
        <h1>お買い物サイト</h1>
    </center>
    <script type="text/javascript" src="alldata.js"></script>
    <script type="text/javascript" src="script.js"></script>
</header>

<br>
<br>
<br>

<body>
    <div>
        <!--フォーム-->
        <form name="login_form">
            <center>
                <h1 class="contact-title">アイテム購入</h1>
            </center>
            <div>

                <center>
                    <div>
                        <p> <span id="span1"></span></p>
                    </div>
                    <br>
                    <div>
                        <input type="id" id="kosu" placeholder="個数" value=0>
                    </div>
                </center>

            </div>
            <table id="buy-table"><tr><td><button type="button" onClick="newbuy();">購入</button></td>
            <td><button type="button" onclick="history.back()">戻る</button></td></tr>
            </table>
            <script type="text/javascript">
                window.onload = function() {
                // URLを取得
                const url = new URL(window.location.href);
                // URLSearchParamsオブジェクトを取得
                const params = url.searchParams;
                // consoleに受け取ったパラメータを出力
                // パラメータから「username」を取得
                const buynum = params.get("num");
                // URLから受信した商品Numberの内容を表示
                let saleObj = {};
                for (let num of allItem) {
                    if (num["Number"] === buynum) {
                        saleObj = num;
                    }
                }
                //sale.htmlから購入する商品の情報を取得
                let saledata = '<p>品名：'+ saleObj["Name"]+'<br>価格：' + saleObj["Price"] + '<br><img src="' + saleObj["Image"] +'" class ="sale"></p>';
                // IDを使ってspan要素を取得する
                target = document.getElementById("span1");
                // 購入する商品の情報を表示
                target.innerHTML = saledata;
                }
            </script>
        </form>
    </div>
</body>

</html>